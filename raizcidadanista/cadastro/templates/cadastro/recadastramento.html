{% extends 'base.html' %}
{% load bootstrap static %}

{% block title %}Recadastramento - {% endblock %}
{% block ogtitle %}Recadastramento - {% endblock %}

{% block description %}Recadastramento - {% endblock %}
{% block ogdescription %}Recadastramento - {% endblock %}

{% block main %}
<div class="pi-section-w pi-section-white pi-border-top">
    <div class="pi-section pi-padding-bottom-20">
        <div class="pi-row">
            <div class="pi-col-sm-12">
                <h4 class="pi-weight-700 pi-uppercase pi-letter-spacing pi-has-bg pi-margin-bottom-30">
                    <a href="" class="pi-link-dark">Recadastramento</a>
                </h4>
                <div class="row">
                    <div class="pi-col-md-12">
                        <div class="panel-body">
                            <h3>Dados pessoais</h3><br>
                            <div class="form-group pi-col-md-6">
                                <label class="control-label">Nome Completo:</label> {{ membro.nome }}
                            </div>
                            <div class="form-group pi-col-md-6">
                                <label class="control-label">Apelido ou Alcunha:</label> {{ membro.apelido }}
                            </div>
                            <div class="form-group pi-col-md-12">
                                <label class="control-label">Status:</label> {% if membro.filiado %}Pré-filiado{% else %}Colaborador{% endif %}
                            </div>
                            <div class="form-group pi-col-md-12">
                                <label class="control-label">Email:</label> {% if membro.email %}{{ membro.email }}{% else %}-{% endif %}
                            </div>
                            <div class="form-group pi-col-md-6">
                                <label class="control-label">Tel.Celular:</label> {% if membro.celular %}{{ membro.celular }}{% else %}-{% endif %}
                            </div>
                            <div class="form-group pi-col-md-6">
                                <label class="control-label">Tel.Residencial:</label> {% if membro.residencial %}{{ membro.residencial }}{% else %}-{% endif %}
                            </div>
                            <div class="form-group pi-col-md-12">
                                <label class="control-label">Dt.Nascimento:</label> {% if membro.dtnascimento %}{{ membro.dtnascimento }}{% else %}-{% endif %}
                            </div>
                            <div class="form-group pi-col-md-3">
                                <label class="control-label">RG:</label> {% if membro.rg %}{{ membro.rg }}{% else %}-{% endif %}
                            </div>
                            <div class="form-group pi-col-md-3">
                                <label class="control-label">CPF:</label> {% if membro.cpf %}{{ membro.cpf }}{% else %}-{% endif %}
                            </div>
                            <div class="form-group pi-col-md-3">
                                <label class="control-label">Sexo:</label> {% if membro.sexo %}{{ membro.get_sexo_display }}{% else %}-{% endif %}
                            </div>
                            <div class="form-group pi-col-md-3">
                                <label class="control-label">Estado civil:</label> {% if membro.estadocivil %}{{ membro.get_estadocivil_display }}{% else %}-{% endif %}
                            </div>
                            <div class="form-group pi-col-md-12">
                                <label class="control-label">Residência:</label> {% if membro.endereco %}{{ membro.endereco }}{% endif %}{% if membro.endereco_num %}, {{ membro.endereco_num }}{% endif %}{% if membro.endereco_complemento %} - {{ membro.endereco_complemento }}{% endif %}{% if membro.municipio %} - {{ membro.municipio }}{% endif %}{% if membro.uf %}-{{ membro.uf }}{% endif %} - {% if membro.endereco_cep %}{{ membro.endereco_cep }}{% endif %}
                            </div>
                            {% if membro.filiado %}
                            <div class="form-group pi-col-md-12">
                                <div class="form-group"><label class="control-label">Nome da mãe:</label> {{ membro.nome_da_mae }}</div>
                            </div>
                            <div class="form-group form-inline pi-col-md-12">
                                <div><label class="control-label">UF do Domicílio Eleitoral:</label> {{ membro.uf_eleitoral }}</div>
                                <div><label class="control-label">Município Eleitoral:</label> {{ membro.municipio_eleitoral }}</div>
                                <div><label class="control-label">Título:</label> {{ membro.titulo_eleitoral }}</div>
                                <div><label class="control-label">Zona:</label> {{ membro.zona_eleitoral }}</div>
                                <div><label class="control-label">Seção:</label> {{ membro.secao_eleitoral }}</div>
                            </div>
                            <div class="form-group pi-col-md-12">
                                <label class="control-label">Filiação Partidária:</label> {{ membro.filiacao_partidaria }}
                            </div>
                            {% endif %}
                            <div class="pi-col-md-12">
                                <form action="" method="POST">{% csrf_token %}
                                    <a href="{{ membro.get_absolute_update_url }}"><button type="button" class="btn btn-success">Atualizar dados</button></a>
                                    {% if not membro.confirmado %}
                                    <button name="action" value="confirmar" class="btn btn-success">Confirmar a minha participação</button>
                                    {% endif %}
                                    {% if membro.filiado %}
                                        <button name="action" value="colaborador" class="btn btn-success">Quero ser apenas colaborador(a)</button>
                                    {% else %}
                                        <button name="action" value="filiado" class="btn btn-success">Quero ser pré-filiado(a)</button>
                                    {% endif %}
                                    <button name="action" value="sair" class="btn btn-success" onclick="return confirm('Você realmente deseja pedir desligamento da RAiZ?');">Não quero mais fazer parte da RAiZ</button>
                                </form>
                            </div>
                        </div>

                        <div class="panel-body">
                            <h3>Meus círculos</h3>
                            {% if membro.circulomembro_set.exists %}
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Círculos</th>
                                        <th colspan="2">Jardineiro</th>
                                    </tr>
                                </thead>
                                <tbody>
                                {% for cm in membro.circulomembro_set.all %}
                                    <tr>
                                    {% if cm.circulo.site_externo %}
                                        <td width="40%"><a href="{{ cm.circulo.site_externo }}" target="_blank">{{ cm.circulo.titulo }}</a></td>
                                    {% else %}
                                        <td width="40%"><a>{{ cm.circulo.titulo }}</a></td>
                                    {% endif %}
                                    {% if cm.circulo.administrador_publico %}
                                        <td width="40%">
                                            {% for adm in cm.circulo.administrador_publico %}
                                                {{ adm.membro.nome }}
                                                {% if adm.membro.celular %}<br>Cel.: {{ adm.membro.celular }}{% endif %}
                                                <br><a href="{% url contato %}?adm={{ adm.pk }}">Envie um email para o Círculo</a>
                                            {% endfor %}
                                        </td>
                                    {% else %}
                                        <td width="40%"></td>
                                    {% endif %}

                                    {% if cm.circulo.site_externo %}
                                        <td width="10%" style="min-width: 150px"><a href="{{ cm.circulo.site_externo }}" class="button-membro-add" target="_blank">Visualizar Grupo</a></td>
                                    {% else %}
                                        <td width="10%"></td>
                                    {% endif %}
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                            {% else %}
                            Você não participa de nenhum círculo.
                            {% endif %}

                            <p>Caso queira se cadastrar em algum outro círculo da Raiz para receber os informes, <a href="/circulos-ident/">clique aqui</a>.</p>
                        </div>

                        <div class="panel-body">
                            <h3>Minhas contribuições</h3>
                            {% if membro.receita_set.exists %}
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Data</th>
                                        <th>Valor</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for receita in membro.receita_set.all %}
                                    <tr>
                                        <td>{{ receita.dtaviso }}</td>
                                        <td>R$ {{ receita.valor }}</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                            {% else %}
                            Nenhuma contribuição encontrada!
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style type="text/css">
    .btn-success {
        background: #94C11E;
        border: 1px #000 solid;
    }

    .form-inline div {
        display: inline;
        margin-right: 20px
    }
</style>
{% endblock %}